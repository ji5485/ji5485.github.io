{
    "componentChunkName": "component---src-page-template-blog-post-item-template-tsx",
    "path": "/post/2021-04-10/javascript-core-concept-summary-closure/",
    "result": {"data":{"markdownRemark":{"html":"<h2 id=\"클로저를-알아보기-전에-실행-컨텍스트가-뭐였지\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-%EC%A0%84%EC%97%90-%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EA%B0%80-%EB%AD%90%EC%98%80%EC%A7%80\" aria-label=\"클로저를 알아보기 전에 실행 컨텍스트가 뭐였지 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클로저를 알아보기 전에, 실행 컨텍스트가 뭐였지?</h2>\n<p>아래의 코드로 실행 컨텍스트의 생성 과정을 표현하면 어떻게 나올까요?</p>\n<p>정답을 보기 전에 한 번이라도 생각해본 다음에 답을 확인해보세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> text <span class=\"token operator\">=</span> <span class=\"token string\">'Hello'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Hello</span></code></pre></div>\n<p>얼핏 보기에 코드 구조는 그렇게 어렵지 않아보입니다.</p>\n<p>가장 먼저, 전역 단계에서 전역 컨텍스트가 생성되면서 foo 함수에 대한 함수 객체 값을 저장할 것입니다.</p>\n<p>그 다음 foo 함수가 실행되면 새로운 실행 컨텍스트가 생성될 것이고, 내부에 정의된 text 변수와 bar 함수 객체의 값을 변수 객체에 저장하게 되겠죠.</p>\n<p>마지막으로 bar 함수가 실행되면서 또 다른 실행 컨텍스트가 생성되고, text를 출력하는 코드를 실행하게 됩니다.</p>\n<p>하지만 bar 함수에 text 값이 존재하지 않기 때문에 스코프 체인을 따라 foo 함수 내부의 text 변수를 출력하게 될 것입니다.</p>\n<p>아래의 그림은 위의 과정을 그림으로 나타낸 것입니다.</p>\n<br />\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \n        width: 100%;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n      \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c62abf739b783a0d276a216ed371ec4/fe486/javascript-core-concept-summary-closure-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.0625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACKElEQVQozy2PXU9SAQCGue5Cl93YVl3UtRetrJs2tWnlXX+gi+7rZ7i2XGEfaoohIEuCFJ0slS40P1EBO8A5gHj4EEE+DnKOoVkunuZZ7/ZePXve7TWMKGEG97YY2g8wpIRw/0xyHun0kGFVxFyVGC4KmNUoJlUif1bjb72OXYszokUxlQRGKhFGtRgfqxKG29tW2jcs3N+y0RI08zTt1Qc9apKWkJVOyUmXME6H5ORWxI5wUqZer9Mdn+Su+ImukINO0Ulr2E63PIVhXk0xqcSZVhK4KwneFAL64NJxjsGDbWYPZVwHIt5qCmPeT+S0wh/AWAjgKcRw7YX4nAziLsZ4nl3EENDyePMxZjMRlqsZhsthkrLMZFrApSbwHeXwlnfZqhWwVEQWsnEkOUFvbpN5NY0t6ceRFZgu7/BsfxGDpyozmglgTvlxFEWMxSA17Yi5UgJnJc5SKclMOsxSQcZSkdg4zKJpGh3hca76+rn3w86dFRNNX1/wMD6B4cbGB24GR2nftNI895IncY9+eaG2z9uDIF+KUQZ21nDlIrwq+An9UnTeEXHQtNrHA8HBoxUrDTM9dIlODI2rRprX33F9fYAL33t5HHXrwlR1l8a1Pi773tMWsHNxpoeGhV62j0s6bxXGaFh5zRVfP9fW+7m0bKQt5sRgVyTOO6ZIWBSROS2tC/JvFUtZxK5E+abImFJ+BjJ+imcnOp+oJrCVRd2z/fcn1F3+Adk/BAIP9r+SAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1c62abf739b783a0d276a216ed371ec4/a59e9/javascript-core-concept-summary-closure-1.webp 192w,\n/static/1c62abf739b783a0d276a216ed371ec4/0ca9f/javascript-core-concept-summary-closure-1.webp 384w,\n/static/1c62abf739b783a0d276a216ed371ec4/dc9b9/javascript-core-concept-summary-closure-1.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1c62abf739b783a0d276a216ed371ec4/3b721/javascript-core-concept-summary-closure-1.png 192w,\n/static/1c62abf739b783a0d276a216ed371ec4/66595/javascript-core-concept-summary-closure-1.png 384w,\n/static/1c62abf739b783a0d276a216ed371ec4/fe486/javascript-core-concept-summary-closure-1.png 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1c62abf739b783a0d276a216ed371ec4/fe486/javascript-core-concept-summary-closure-1.png\"\n            alt=\"./javascript-core-concept-summary-closure-1.png\"\n            title=\"./javascript-core-concept-summary-closure-1.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br />\n<p>더 정확하게 하기 위해서는 foo 실행 컨텍스트와 bar 실행 컨텍스트에 arguments 객체도 추가해야하나, 함수에 넘긴 인자값이 존재하지 않으므로 생략했습니다.</p>\n<h2 id=\"본격적으로-클로저에-대해-알아보자\" style=\"position:relative;\"><a href=\"#%EB%B3%B8%EA%B2%A9%EC%A0%81%EC%9C%BC%EB%A1%9C-%ED%81%B4%EB%A1%9C%EC%A0%80%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\" aria-label=\"본격적으로 클로저에 대해 알아보자 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>본격적으로 클로저에 대해 알아보자</h2>\n<p>위와 같이 간단한 상황에서는 쉽게 실행 컨텍스트의 생성 과정을 나타낼 수 있지만 만약 아래와 같이 코드가 변경된다면 어떻게 실행 컨텍스트 생성 과정이 바뀔까요?</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> text <span class=\"token operator\">=</span> <span class=\"token string\">'Hello'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> bar<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> func <span class=\"token operator\">=</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ??</span></code></pre></div>\n<p>조금 헷갈릴 수 있는 부분이 추가되었습니다.</p>\n<p>이제는 foo 함수 내에서 bar 함수를 출력하는 것이 아니라 반환하여 전역 단계에서 해당 함수를 실행합니다.</p>\n<p>전역 단계에서 함수를 실행시키기 때문에 text 변수를 찾지 못하고 오류를 출력하게 될까요?</p>\n<p>먼저 변화된 실행 컨텍스트 생성 과정을 알아봅시다.</p>\n<br />\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \n        width: 100%;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n      \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2b627249cd4c5a66fc4525b8ddd37130/fe486/javascript-core-concept-summary-closure-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.0625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACKUlEQVQozx2QS1NSAQCF77KVTbpqplq0d1NZm2bMRiuX/YT29SeacVo4hTVpIUqgpIQS5iOLHppPkoe87uV5gUTkdYFLGpkWX+M9m7P45juLI4woIV7suNHvetErQRz7KU4iHVYZVkWMNYnhYgCjGsGgSuwdH/Cv2cRSjzFSj2AoBRiphHlVjzJakxCubJu5sWXipnuMdp+RexmnNrjwM0170Ey3ZKMnMEmXZONy2EKgUabZbNIbe8s1cYKeoJVu0UZHyEKvPIPgVDM4lBizSoKZaoKneS9//xzxRc3wsuBnsSozlRdx1tLo9jyEDyscAbqCl/lClKmdIG9SPhzFKA+yywjeRpHPSoqvSor1Rh5dbBW/18fr8Aa2ahzX/h7OUhL3QQFTRWQpG0OSE/TntvioZhhLebBmA7wrx7m/u4ywpeZYzEVYyIRYrmbQl4Ok5RT2tJ/pWoKVksxcJsRKQcZUkfhezVKv1+kKTXLeNch1v4WrawZa3z/idsyOMFtNYsx4GE27mSiE0RV92offDnZ5lvcxXYwwFN9gKhfmccFD8Lei8a6wldb1AW4FrNxZM9My10ePaENoWx/golvPpU0Dp+Yfcjfi0ISZWpLTGwOcdT2n02vhzFwfLUv9bP8qabwjME7L2hPOuQa5sDlI26qOzqgNYawsMlmJ4lDimEthPqhpTZAPVUxlEYsS4ZMiY0h7GPrhoXjc0Li9luDEHVckxhRJa7ua5D8oLQfDZ2F5WwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2b627249cd4c5a66fc4525b8ddd37130/a59e9/javascript-core-concept-summary-closure-2.webp 192w,\n/static/2b627249cd4c5a66fc4525b8ddd37130/0ca9f/javascript-core-concept-summary-closure-2.webp 384w,\n/static/2b627249cd4c5a66fc4525b8ddd37130/dc9b9/javascript-core-concept-summary-closure-2.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2b627249cd4c5a66fc4525b8ddd37130/3b721/javascript-core-concept-summary-closure-2.png 192w,\n/static/2b627249cd4c5a66fc4525b8ddd37130/66595/javascript-core-concept-summary-closure-2.png 384w,\n/static/2b627249cd4c5a66fc4525b8ddd37130/fe486/javascript-core-concept-summary-closure-2.png 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2b627249cd4c5a66fc4525b8ddd37130/fe486/javascript-core-concept-summary-closure-2.png\"\n            alt=\"./javascript-core-concept-summary-closure-2.png\"\n            title=\"./javascript-core-concept-summary-closure-2.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br />\n<p>달라진 부분이 보이시나요?</p>\n<p>전역 실행 컨텍스트에서 func라는 이름으로 반환받은 bar 함수를 실행시켰습니다.</p>\n<p>이 말은 곧 <strong>foo 실행 컨텍스트가 사라진 후에 bar 실행 컨텍스트가 생성</strong>된다는 것인데, bar 함수의 스코프 체인은 <strong>여전히 foo 함수의 활성 객체를 참조</strong>하고 있습니다.</p>\n<p>이렇게 <strong>반환된 내부 함수가 이미 생명 주기가 끝난 외부 함수의 변수를 참조하는 함수</strong>를 클로저라고 합니다.</p>\n<p>그리고 클로저에 해당하는 bar 함수가 참조하는 text와 같은 변수를 자유 변수라고 합니다.</p>\n<p>이와 같이 클로저는 <strong>함수를 일급 객체로 취급</strong>하는 자바스크립트에서 흔히 사용되는 핵심 개념입니다.</p>\n<p>그러나 이런 특징은 자바스크립트에만 국한된 개념이 아니라 LISP나 Clojure, Haskell 등과 같은 함수형 프로그래밍 언어의 특징이기 때문에 다른 함수형 프로그래밍 언어를 익히기 위해서는 필히 익혀야 합니다.</p>\n<h2 id=\"다양한-클로저의-활용-예시\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%96%91%ED%95%9C-%ED%81%B4%EB%A1%9C%EC%A0%80%EC%9D%98-%ED%99%9C%EC%9A%A9-%EC%98%88%EC%8B%9C\" aria-label=\"다양한 클로저의 활용 예시 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다양한 클로저의 활용 예시</h2>\n<p>이렇게 매력적인 기능을 가진 클로저를 잘 활용한다는 것은 엄청난 이점을 가져다줄 수 있습니다.</p>\n<p>하지만 생명 주기가 끝난 외부 함수의 렉시컬 환경을 기억해야하므로 메모리 측면에서 어느정도 손해볼 수 있기 때문에 다양한 개발 경험을 쌓아야 합니다.</p>\n<p>그럼 이제 클로저를 어떻게 활용할 수 있는지 알아봅시다.</p>\n<h3 id=\"함수의-캡슐화\" style=\"position:relative;\"><a href=\"#%ED%95%A8%EC%88%98%EC%9D%98-%EC%BA%A1%EC%8A%90%ED%99%94\" aria-label=\"함수의 캡슐화 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>함수의 캡슐화</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> generateString <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> templateStr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Hello, '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'. Welcome!'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    templateStr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> templateStr<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> str <span class=\"token operator\">=</span> <span class=\"token function\">generateString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hyun'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Hello, Hyun. Welcome!</span></code></pre></div>\n<p>위의 예제에서는 <code class=\"language-text\">generateString</code> 변수에 익명 함수를 즉시 실행시켜 <code class=\"language-text\">templateStr</code> 변수를 참조하는 클로저 함수를 반환했습니다.</p>\n<p>만약 문장 템플릿을 전역 변수로 정의했다면, 이는 외부에 노출되어 중간에 값이 변경되거나 동일한 이름을 가진 변수를 생성해 오류가 생길 가능성이 존재합니다.</p>\n<p>따라서 이런 상황에 대비해 외부에서 접근할 수 없도록 위와 같이 클로저 함수를 활용할 수 있습니다.</p>\n<h3 id=\"private-fields-제공\" style=\"position:relative;\"><a href=\"#private-fields-%EC%A0%9C%EA%B3%B5\" aria-label=\"private fields 제공 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Private Fields 제공</h3>\n<p>이는 위의 예제에서 더 확장된 개념인데, 기본적으로 자바스크립트에서는 Private Fields를 제공하지 않지만 제공하는 것처럼 보이게하는 예제입니다.</p>\n<p>물론 ES2019 이후부터는 Private Class Fields 문법이 추가되어 <code class=\"language-text\">#</code> 을 통해 정의가 가능하지만, 이전 버전의 경우에서는 클로저 함수를 통해 Private Property와 Method를 제공하는 흉내를 낼 수 있습니다.</p>\n<p>아래 예제 코드를 확인해봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Private Property</span>\n  <span class=\"token keyword\">var</span> number <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Private Method</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">changeNumberBy</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    number <span class=\"token operator\">+=</span> num<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Public Method</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">increment</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">changeNumberBy</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">decrement</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">changeNumberBy</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">currentValue</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> number<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> counter <span class=\"token operator\">=</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">currentValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0</span>\ncounter<span class=\"token punctuation\">.</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">currentValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\ncounter<span class=\"token punctuation\">.</span><span class=\"token function\">decrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncounter<span class=\"token punctuation\">.</span><span class=\"token function\">decrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">currentValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -1</span></code></pre></div>\n<p>위에서는 <code class=\"language-text\">Counter</code>라는 함수를 통해 <code class=\"language-text\">number</code> 변수를 프라이빗하게 관리할 수 있도록 한 예제입니다.</p>\n<p>이렇게 클로저를 활용하면 <code class=\"language-text\">counter.number</code>로는 값에 접근할 수 없기 때문에 마치 Private Fields를 설정한 것처럼 구현할 수 있습니다.</p>\n<p>마찬가지로 외부에서는 <code class=\"language-text\">changeNumberBy</code> 함수에 접근할 수 없습니다.</p>\n<h2 id=\"클로저-활용-시-간과할-수-있는-점\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80-%ED%99%9C%EC%9A%A9-%EC%8B%9C-%EA%B0%84%EA%B3%BC%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%A0%90\" aria-label=\"클로저 활용 시 간과할 수 있는 점 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클로저 활용 시 간과할 수 있는 점</h2>\n<p>위와 같이 잘 사용한다면 정말 강력한 기능이 될 수 있는 클로저를 사용할 때에 간과할 수 있는 사항입니다.</p>\n<ol>\n<li>\n<p>클로저가 참조하는 자유 변수의 값은 항상 변할 수 있습니다.</p>\n<p>위의 클로저 활용 예시 중, Private Fields를 제공하도록 구현한 예제를 확인해보세요.</p>\n<p><code class=\"language-text\">counter.increment</code> 함수나 <code class=\"language-text\">counter.decrement</code> 함수를 호출할 때마다 자유 변수의 값이 계속해서 변경되니 주의해야 합니다.</p>\n</li>\n<li>\n<p>여러 클로저 함수 객체가 하나의 자유 변수를 참조할 수 있습니다.</p>\n<p>마찬가지로 동일한 예제를 확인해보세요.</p>\n<p><code class=\"language-text\">counter.increment</code> 함수와 <code class=\"language-text\">counter.decrement</code> 함수 모두 하나의 자유 변수인 <code class=\"language-text\">number</code> 를 참조하기 때문에 각각의 함수가 호출될 때마다 동일한 변수의 값이 변경됩니다.</p>\n</li>\n<li>\n<p>루프 안에서 클로저 함수를 활용할 경우에는 의도와 다르게 동작할 수 있습니다.</p>\n<p>아래의 예시는 클로저의 잘못된 사용 예제에서 항상 등장하는 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> i <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>만약 1, 2, 3이 1초 간격으로 출력되도록 의도하여 작성한 코드라면 아직 클로저에 대해 제대로 모르고 있다는 개발자일 것입니다.\n<code class=\"language-text\">setTimeout</code> 함수의 인자로 들어가는 익명 함수에서 참조하는 변수 <code class=\"language-text\">i</code> 는 자유 변수입니다.</p>\n<p>하지만, 모든 <code class=\"language-text\">setTimeout</code> 구문이 실행되고 나서 자유 변수 <code class=\"language-text\">i</code>의 값은 4가 되기 때문에 모두 4를 출력하게 됩니다.</p>\n<p>따라서 <code class=\"language-text\">i</code>의 값을 복사한 값을 출력하도록 변경해야 하는데, 이를 위해 아래 코드와 같이 즉시 실행 함수를 활용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> val <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<hr>\n<h2 id=\"source\" style=\"position:relative;\"><a href=\"#source\" aria-label=\"source permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source</h2>\n<ul>\n<li>\n<p>인사이드 자바스크립트 도서</p>\n</li>\n<li>\n<p>PoiemaWeb - 클로저</p>\n<p><a href=\"https://poiemaweb.com/js-closure\" target=\"_blank\" rel=\"nofollow\">https://poiemaweb.com/js-closure</a></p>\n</li>\n<li>\n<p>Mozilla - 클로저</p>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures\" target=\"_blank\" rel=\"nofollow\">https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures</a></p>\n</li>\n</ul>","frontmatter":{"title":"JavaScript 핵심 개념 - 실행 컨텍스트로 알아보는 클로저 (Closure)","date":"2021-04-10","summary":"자바스크립트에서 필수적으로 알아야 할 핵심 개념들을 정리해보았습니다. / 자바스크립트에서의 클로저 (Closure)","categories":["JavaScript"],"thumbnail":{"publicURL":"/static/5b9c51080451b9c7c39e85174cacbc82/javascript-core-concept-summary-closure.png","childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB/klEQVQoz32TXW/ScBTG+YjqhYkx8dbEZBcK42VdcCayOTaURTfiMNEl4sx0S2kLyKBA22l52xAZk00x3vkhvPiZ/ksnI2MXJ3ly2vPLc/7nHN+cZuJERDXw9GRErvhnMue7kFQNJKENoSOacf5NGhVIE3oS6nMLXVhQM/GrJgHFYFY1mVfdfEip4ZerzGZrBOQqgayjq0KPwxzt85yFcgcUixV6ZZ2O3cIo6aRMm0d5i2W9wVbzmKfVFm/bfV7ZXVIHHV7Xe8znLAH3wMJhWDNZkMv8KWQ5XU/QerHKWSZNUd0juSPzst5j//sv3h2eoPWH5E+GKL0f5PtDlkp1npTrSLmRQ+fNAvnPbLzf5W96mWTwPguJBJVmi0bnK5JcEG4+dAbCZdru8qbRE04z7T6lwW/U45/CqduyeDuLeLZE9OZ17ty6Tc00yBRy5GSZgLzPhnXE3rcz4dAB73QG7HZP2fzSFaCw8n94PiGUGuFiHX80xo17M6yvPUMPzrAZesDK1jaP9RYp64hkrc2K3iA+Fs7ALh1KWLNY1HSCSoFr8TXuPlwi9jHP3LZCrGSzWmkKp8/NQxZLtph0SDHOQRccemsT0kwxoGixjvTJJqJZSE5Lo9VxIjxWfPliq94Su1ChnTbUmqunXNC0vC/indYI6sYINBbu+U0/Tw/4D7NXyQJtSZhVAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/5b9c51080451b9c7c39e85174cacbc82/0f157/javascript-core-concept-summary-closure.png","srcSet":"/static/5b9c51080451b9c7c39e85174cacbc82/c7aa3/javascript-core-concept-summary-closure.png 192w,\n/static/5b9c51080451b9c7c39e85174cacbc82/cff52/javascript-core-concept-summary-closure.png 384w,\n/static/5b9c51080451b9c7c39e85174cacbc82/0f157/javascript-core-concept-summary-closure.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[{"srcSet":"/static/5b9c51080451b9c7c39e85174cacbc82/04b43/javascript-core-concept-summary-closure.webp 192w,\n/static/5b9c51080451b9c7c39e85174cacbc82/7efec/javascript-core-concept-summary-closure.webp 384w,\n/static/5b9c51080451b9c7c39e85174cacbc82/803f0/javascript-core-concept-summary-closure.webp 768w","type":"image/webp","sizes":"(min-width: 768px) 768px, 100vw"}]},"width":768,"height":449.99999999999994}}}},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-%EC%A0%84%EC%97%90-%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EA%B0%80-%EB%AD%90%EC%98%80%EC%A7%80\">클로저를 알아보기 전에, 실행 컨텍스트가 뭐였지?</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%B3%B8%EA%B2%A9%EC%A0%81%EC%9C%BC%EB%A1%9C-%ED%81%B4%EB%A1%9C%EC%A0%80%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\">본격적으로 클로저에 대해 알아보자</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%96%91%ED%95%9C-%ED%81%B4%EB%A1%9C%EC%A0%80%EC%9D%98-%ED%99%9C%EC%9A%A9-%EC%98%88%EC%8B%9C\">다양한 클로저의 활용 예시</a></p>\n<ul>\n<li><a href=\"#%ED%95%A8%EC%88%98%EC%9D%98-%EC%BA%A1%EC%8A%90%ED%99%94\">함수의 캡슐화</a></li>\n<li><a href=\"#private-fields-%EC%A0%9C%EA%B3%B5\">Private Fields 제공</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80-%ED%99%9C%EC%9A%A9-%EC%8B%9C-%EA%B0%84%EA%B3%BC%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%A0%90\">클로저 활용 시 간과할 수 있는 점</a></p>\n</li>\n<li>\n<p><a href=\"#source\">Source</a></p>\n</li>\n</ul>"},"site":{"siteMetadata":{"siteUrl":"https://ji5485.github.io"}}},"pageContext":{"slug":"/post/2021-04-10/javascript-core-concept-summary-closure/","prev":{"slug":"/post/2021-05-01/developing-infinite-scroll-using-intersection-observer-api/","title":"Intersection Observer API로 Infinite Scroll 구현하기"},"next":{"slug":"/post/2021-04-05/problem-solving-review-9466/","title":"BOJ#9466 - 텀 프로젝트 Review"}}},
    "staticQueryHashes": []}