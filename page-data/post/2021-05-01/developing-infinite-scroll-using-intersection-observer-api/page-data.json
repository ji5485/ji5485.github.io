{
    "componentChunkName": "component---src-page-template-blog-post-item-template-tsx",
    "path": "/post/2021-05-01/developing-infinite-scroll-using-intersection-observer-api/",
    "result": {"data":{"markdownRemark":{"html":"<h3 id=\"서론\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%A1%A0\" aria-label=\"서론 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서론</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \n        width: 100%;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n      \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b65cd88d10b5815051447f6eed8378b3/c2ad0/developing-infinite-scroll-using-intersection-observer-api-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.79166666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC5UlEQVQ4y3WR+0tTYRjH968U9VOWWe3q5s7Ojlvu5o5zuk03tVWsTIiu/lBRBEFEdKf7jYroAl2ozPKH0i6Y3dOkEsuKCoLwRrrpzic8tlVWD3x5Xt6H5/N+4NVM19vINdiZaSokz+wkz1TIbJOE1upCL3ox2IsxSjL5jhLMzlIsRWVYXeUInjA2bwX24kokOYYkV+GLJNDk6ARm6EUVmKuzYouuQKo/gVb0oRPc6EUfRsmPqVAm3xnAMjdIwRjUHULwRhB9Fdj9Uez+GN7wQjQ5WisZy1yDiN4dwxxbwxy7zGzLXLSCB53Niz5rGsBSFKQgaxlRLe3FUTxjwOljhgaRmUZJtTQX+pE8QYSiABZnCdaiUgRXEJu7HNEbxuYJqYaCO4TNG1YNJX9UjWo4aZqWyTl6pswwMjXXRF6+A6Pdh0H0YpSKMTtLyHfIWF1BrK4yzM4AswrcaG0+dKIfvSRjdAQwOkpVqMYfqkYO11ASiROomK+mtHIBwehCyqoSlFcvIlRTS3jeEiLxOioXLCWWWEbVouVUL17BvNpVxOtWE6+rZ8nK9WiYUIoCaWW8/35WZxPyr9IoisKvQCr5HUgBI8Dozz7CyPAQSiqJMpJiNDmsZlxA+SNZYDo9/ubNlm4277vPruNt7Dv5iB1HHnDuagetPZ9pfNXDzc63aq61d9Hx6au6k/4dmHklA1y1qZFDey+wZ89FXDXHcVQexZc4x/6GW5w8eozt15s5eO8Z6640c/phxzjw5+4/gfWbm1i99hQr157BEz+FUHYEOXGebQ23WbNtN1suN7Gr5SkbGu5y9nFn1vC/wMbbr9m48xZbD9xhx+EWth5o4dKNV9zv/sil56+5/LCdq09ecqHtBe0fv2RBfwDH/ixz+b6nm7bW5r/+8sXTJ3R1vmR4cIChgX5Ij4KSzu79ZZgZ9Pb20fP+g9p7+/r59q2XZDLFm64u3r57x/ehIQYGB+nr61fvJxr+ALPoKiZyoi4xAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b65cd88d10b5815051447f6eed8378b3/a59e9/developing-infinite-scroll-using-intersection-observer-api-1.webp 192w,\n/static/b65cd88d10b5815051447f6eed8378b3/0ca9f/developing-infinite-scroll-using-intersection-observer-api-1.webp 384w,\n/static/b65cd88d10b5815051447f6eed8378b3/dc9b9/developing-infinite-scroll-using-intersection-observer-api-1.webp 768w,\n/static/b65cd88d10b5815051447f6eed8378b3/e2c2f/developing-infinite-scroll-using-intersection-observer-api-1.webp 1152w,\n/static/b65cd88d10b5815051447f6eed8378b3/b40ad/developing-infinite-scroll-using-intersection-observer-api-1.webp 1365w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b65cd88d10b5815051447f6eed8378b3/3b721/developing-infinite-scroll-using-intersection-observer-api-1.png 192w,\n/static/b65cd88d10b5815051447f6eed8378b3/66595/developing-infinite-scroll-using-intersection-observer-api-1.png 384w,\n/static/b65cd88d10b5815051447f6eed8378b3/fe486/developing-infinite-scroll-using-intersection-observer-api-1.png 768w,\n/static/b65cd88d10b5815051447f6eed8378b3/d2d74/developing-infinite-scroll-using-intersection-observer-api-1.png 1152w,\n/static/b65cd88d10b5815051447f6eed8378b3/c2ad0/developing-infinite-scroll-using-intersection-observer-api-1.png 1365w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b65cd88d10b5815051447f6eed8378b3/fe486/developing-infinite-scroll-using-intersection-observer-api-1.png\"\n            alt=\"developing-infinite-scroll-using-intersection-observer-api-1.png\"\n            title=\"developing-infinite-scroll-using-intersection-observer-api-1.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br />\n<p>이번에 <a href=\"https://edu.goorm.io/lecture/25881/%EB%88%84%EA%B5%AC%EB%82%98-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EA%B0%9C%EB%B0%9C-%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4-react-%EA%B8%B0%EB%B0%98-gatsby%EB%A1%9C-%EA%B8%B0%EC%88%A0-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EA%B0%9C%EB%B0%9C%ED%95%98%EA%B8%B0\" target=\"_blank\" rel=\"nofollow\">Gatsby 프레임워크를 사용해 블로그를 개발하는 강의</a>를 업로드했습니다.</p>\n<p>제가 전에 개발했던 블로그는 여러 콘텐츠를 보여주기 위해 페이지네이션 방법을 사용했었지만, 이번에는 조금 다른 방식으로 개발하고 싶기도 했고 예전에 한 번 구현해봤던 인피니티 스크롤 개발 방식을 다시 상기하고 싶었습니다.</p>\n<p>그렇게 예전에 작업했던 프로젝트를 찾아보며 어떻게 구현했는지 다시 알아보다가, Intersection Observer API를 사용한 방법도 존재한다는 것을 알게되어 바로 예제 블로그에 적용해봤습니다.</p>\n<p>그랬더니 꽤 복잡했던 구현부가 간단해졌을 뿐더러 인피니티 스크롤이 아닌 다른 작업에서도 충분히 활용할 수 있다고 생각했기에 이렇게 관련 글을 작성해봅니다.</p>\n<h3 id=\"intersection-observer-api란-무엇일까\" style=\"position:relative;\"><a href=\"#intersection-observer-api%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C\" aria-label=\"intersection observer api란 무엇일까 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intersection Observer API란 무엇일까?</h3>\n<p>해당 API에 대해 알아보기 전에 우선 Intersection Observer API라는 이름 속에 들어있는 Intersection이라는 단어의 뜻부터 생각해봅시다.</p>\n<p>Intersection은 교차점, 교집합, 교차로 등의 뜻을 가지고 있습니다.</p>\n<p>다양한 의미로 사용될 수 있는 단어이지만, 모든 단어에는 하나같이 “교차한다”라는 의미를 가진 부분이 합쳐져있습니다.</p>\n<p>그럼 뒤에 관측자라는 의미를 가진 단어인 Observer가 붙었으므로 Intersection Observer API은 “교차”하는 것을 “관측”하기 위해 사용되는 API라는 것을 알 수 있겠죠.</p>\n<p>그럼 어떤 것들이 교차하는 지점을 관측한다는 것일까요?</p>\n<br />\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \n        width: 100%;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n      \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ba9a22909a0837de4949887183619751/fe486/developing-infinite-scroll-using-intersection-observer-api-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.0625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABMklEQVQoz5WSa0/CMBSG+f9/xfhJY5CYQCBiQDFymeESJ8plYaPt6G7duu0lPUg0fhBs8qbn5PQ8fdPTSlmWMDJLyASL9QafgmHpx+CxBoszEidpbKMMLErh7BSk0tR37Der8hPosB36Qwue9MFCBSZj8DCBCBV4kIAFMQKVIclyiDgj/QmM0hx5UVC8dFzc9yxU621cXtdw1+qg/Wxhs+VUL4oSYXrCYUjAQ+xxH8PJO6zZHKPp9+7LgOpZXiBQZwD1l0N74aD5ZOGm3sbFVQ23zS5avVdy/i/g0aG7FeiNpuiPbQwmNvrjN8q5L6muzwGaqaX64PBj7aEzmKLReUG18YDW4wDd4QyOd3hDpXPI5ATQ3OiFKX2RlYgwd3eYLFxY9hKzlUf5WkRUN+fMEH8D9zjBZDAUKKN0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ba9a22909a0837de4949887183619751/a59e9/developing-infinite-scroll-using-intersection-observer-api-2.webp 192w,\n/static/ba9a22909a0837de4949887183619751/0ca9f/developing-infinite-scroll-using-intersection-observer-api-2.webp 384w,\n/static/ba9a22909a0837de4949887183619751/dc9b9/developing-infinite-scroll-using-intersection-observer-api-2.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ba9a22909a0837de4949887183619751/3b721/developing-infinite-scroll-using-intersection-observer-api-2.png 192w,\n/static/ba9a22909a0837de4949887183619751/66595/developing-infinite-scroll-using-intersection-observer-api-2.png 384w,\n/static/ba9a22909a0837de4949887183619751/fe486/developing-infinite-scroll-using-intersection-observer-api-2.png 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ba9a22909a0837de4949887183619751/fe486/developing-infinite-scroll-using-intersection-observer-api-2.png\"\n            alt=\"developing-infinite-scroll-using-intersection-observer-api-2.png\"\n            title=\"developing-infinite-scroll-using-intersection-observer-api-2.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br />\n<p>Intersection Observer API는 관측할 Target Element와 Viewport와의 교차 영역을 감시합니다.</p>\n<p>게다가 동일한 Intersection Observer 객체로 여러 Target Element를 감시할 수 있습니다.</p>\n<p>그럼 이를 쉽게 말하면 어떤 역할을 한다고 볼 수 있을까요?</p>\n<p>간단하게 타겟 요소가 화면에 노출되는지 여부를 감시하는 API라고 생각하면 됩니다.</p>\n<p>타겟 요소가 화면에 노출이 된다는 것은 해당 요소와 Viewport 간에 교차 영역이 생긴다는 의미가 되기 때문입니다.</p>\n<h3 id=\"intersection-observer-api-사용-방법\" style=\"position:relative;\"><a href=\"#intersection-observer-api-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\" aria-label=\"intersection observer api 사용 방법 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intersection Observer API 사용 방법</h3>\n<p>그럼 Intersection Observer API는 어떻게 사용할까요?</p>\n<p>아래 코드는 위에서 언급한 강의에 포함되어 있는 예시 코드를 덧붙인 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 타겟 요소 관측 시, 실행될 콜백 함수</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">callback</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">entries<span class=\"token punctuation\">,</span> observer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Observer 선언</span>\n<span class=\"token keyword\">const</span> observer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 타겟 요소 관측 시작</span>\nobserver<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>TargetElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 타겟 요소 관측 중단</span>\nobserver<span class=\"token punctuation\">.</span><span class=\"token function\">unobserve</span><span class=\"token punctuation\">(</span>TargetElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 모든 요소 관측 중단</span>\nobserver<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 관측 중인 모든 요소를 배열 형태로 반환</span>\nobserver<span class=\"token punctuation\">.</span><span class=\"token function\">takeRecords</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Intersection Observer 객체는 처음 생성될 때 타겟 요소 관측 시에 실행할 콜백 함수와, 옵션 객체를 파라미터로 받습니다.</p>\n<p>콜백 함수는 필수적으로 넘겨줘야 하지만, 옵션 객체는 선택 사항으로 넘기지 않을 경우에는 기본값으로 적용됩니다.</p>\n<p>하단 목록은 Intersection Observer 객체에서 사용 가능한 옵션 목록입니다.</p>\n<ol>\n<li>\n<p>root (default: null, Viewport)</p>\n<p>타겟 요소와의 교차 영역을 정의하기 위한 상위 요소 프로퍼티입니다.</p>\n<p>만약 값을 넣지 않거나 null인 경우에는 기본적으로 브라우저의 Viewport가 root로 지정됩니다.</p>\n</li>\n<li>\n<p>rootMargin (default: 0px 0px 0px 0px)</p>\n<p>root 요소에 적용되는 margin 값을 정의하기 위한 프로퍼티입니다.</p>\n<p>지정한 값 만큼 교차 영역이 계산되는 루트의 범위가 축소하게 됩니다.</p>\n</li>\n<li>\n<p>thresholds (default: 0)</p>\n<p>콜백 함수를 실행시키기 위한 루트 영역과 타겟 요소와의 교차 영역 비율을 지정하는 프로퍼티입니다.</p>\n<p>0.0과 1.0 사이의 값을 지정하며, 만약 값이 0.0이라면 타겟 요소가 교차 영역에 진입했을 때, 0.5라면 타겟 요소의 절반이 교차 영역에 들어왔을 때, 1.0이라면 타겟 요소가 완전히 교차 영역에 들어왔을 때 콜백 함수가 실행됩니다.</p>\n</li>\n</ol>\n<p>그럼 이제 Intersection Observer 객체에서 사용 가능한 메서드를 알아봅시다.</p>\n<p>아래 목록은 Intersection Observer 객체 내 메서드 4가지에 대한 설명입니다.</p>\n<ol>\n<li>\n<p>observe (Parameter: Target Element)</p>\n<p>파라미터로 넘긴 타겟 요소에 대한 관측을 시작합니다.</p>\n<p>동일한 옵저버 객체로 여러 번 호출을 통해 다양한 타겟 요소의 관측이 가능합니다.</p>\n</li>\n<li>\n<p>unobserve (Parameter: Target Element)</p>\n<p>타겟 요소에 대한 관측을 중지합니다.</p>\n</li>\n<li>\n<p>disconnect (Parameter: X)</p>\n<p>모든 타겟 요소에 대한 관측을 중지합니다.</p>\n</li>\n<li>\n<p>takeRecords (Parameter: X)</p>\n<p>현재 관측 중인 모든 타겟 요소들을 배열 형태로 반환합니다.</p>\n</li>\n</ol>\n<h3 id=\"intersection-observer-api를-통한-인피니티-스크롤-예제\" style=\"position:relative;\"><a href=\"#intersection-observer-api%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%9D%B8%ED%94%BC%EB%8B%88%ED%8B%B0-%EC%8A%A4%ED%81%AC%EB%A1%A4-%EC%98%88%EC%A0%9C\" aria-label=\"intersection observer api를 통한 인피니티 스크롤 예제 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intersection Observer API를 통한 인피니티 스크롤 예제</h3>\n<p>그럼 어떻게 Intersection Observer API를 통해 인피니티 스크롤을 구현할 수 있을까요?</p>\n<p>그렇게 어렵지 않습니다.</p>\n<p>쉽게 화면에 띄워진 콘텐츠 중, 맨 마지막 요소를 관측하면 됩니다.</p>\n<p>만약 관측되었다면 실행되는 콜백 함수 내에서 해당 요소에 대한 관측을 중지하고, 새로운 콘텐츠를 리스트에 추가한 다음, 다시 마지막 콘텐츠의 관측을 시작하면 되는 것이죠.</p>\n<p>이러한 과정의 반복을 통해 인피니티 스크롤이 구현됩니다.</p>\n<p>아래 코드는 해당 방식을 그대로 구현한 것으로 위에서 언급한 강의에서 사용되는 인피니티 스크롤 훅 코드를 간단한 형태로 변형한 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> MutableRefObject<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> useRef<span class=\"token punctuation\">,</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PostType <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'components/Main/PostList'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">useInfiniteScrollType</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  containerRef<span class=\"token operator\">:</span> MutableRefObject<span class=\"token operator\">&lt;</span>HTMLDivElement <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  postList<span class=\"token operator\">:</span> PostType<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">NUMBER_OF_ITEMS_PER_PAGE</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useInfiniteScroll</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">posts<span class=\"token operator\">:</span> PostType<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> useInfiniteScrollType <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 콘텐츠가 들어갈 목록에 해당하는 ref 속성</span>\n  <span class=\"token keyword\">const</span> containerRef<span class=\"token operator\">:</span> MutableRefObject<span class=\"token operator\">&lt;</span>HTMLDivElement <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>HTMLDivElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 콘텐츠를 10개 단위로 보여주기 위해 사용되는 값</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Intersection Observer 객체</span>\n  <span class=\"token comment\">// 추가설명 1</span>\n  <span class=\"token keyword\">const</span> observer<span class=\"token operator\">:</span> IntersectionObserver <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entries<span class=\"token punctuation\">,</span> observer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>entries<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>isIntersecting<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> value <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    observer<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 콘텐츠 목록에서 맨 마지막 콘텐츠를 관측하기 위한 구현부</span>\n  <span class=\"token comment\">// 추가설명 2</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token constant\">NUMBER_OF_ITEMS_PER_PAGE</span> <span class=\"token operator\">*</span> count <span class=\"token operator\">>=</span> posts<span class=\"token punctuation\">.</span>length <span class=\"token operator\">||</span>\n      containerRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span>\n      containerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    observer<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>containerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span>containerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 추가설명 3</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    containerRef<span class=\"token punctuation\">,</span>\n    postList<span class=\"token operator\">:</span> posts<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> count <span class=\"token operator\">*</span> <span class=\"token constant\">NUMBER_OF_ITEMS_PER_PAGE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> useInfiniteScroll<span class=\"token punctuation\">;</span></code></pre></div>\n<p>위의 코드에서 설명 주석을 달아놓았습니다.</p>\n<p>그 외에도 추가적인 설명이 필요한 부분은 추가설명이라는 주석을 달아놓았는데, 아래 그 부분에 대한 설명을 작성해놓았습니다.</p>\n<ol>\n<li>\n<p>추가설명 1에 대한 부분</p>\n<p>Intersection Observer 객체를 선언한 부분입니다.</p>\n<p>타겟 요소가 관측되면 count 값을 1만큼 증가시키고, 해당 요소에 대한 관측을 중단하는 기능을 가진 콜백 함수를 파라미터로 넘겼습니다.</p>\n<p>따라서 맨 마지막 콘텐츠가 화면에 보이면 count 값이 1 증가하고, 해당 콘텐츠의 관측이 중단됩니다.</p>\n</li>\n<li>\n<p>추가설명 2에 대한 부분</p>\n<p>위의 코드와 주석에 따르면 count 값이 1만큼 증가했다는 것은 콘텐츠를 10개 더 목록에 띄워주었다는 의미를 가지게 됩니다.</p>\n<p>따라서 새로 추가된 콘텐츠 중, 맨 마지막 콘텐츠를 다시 옵저버 객체로 관측해야 합니다.</p>\n<p>이를 위해 useEffect 훅에 count 값을 의존성 배열로 전달하여 해당 값이 변경될 때마다 콘텐츠 목록에 해당하는 ref 값을 통해 맨 마지막 콘텐츠를 가져와 옵저버 객체의 observe 메서드 파라미터로 넘겨 관측을 시작합니다.</p>\n</li>\n<li>\n<p>추가설명 3에 대한 부분</p>\n<p>콘텐츠 목록은 10개 단위로 콘텐츠를 띄워줍니다.</p>\n<p>따라서 useInfiniteScroll 훅으로 받은 인자값인 전체 포스트 배열에서 단위 개수에 count 값을 곱한 만큼만 목록에 띄워줄 수 있도록 객체에 담아 반환해줍니다.</p>\n</li>\n</ol>\n<hr>\n<h3 id=\"source\" style=\"position:relative;\"><a href=\"#source\" aria-label=\"source permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source</h3>\n<ul>\n<li>\n<p>Mozilla - Intersection Observer API</p>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver\" target=\"_blank\" rel=\"nofollow\">https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver</a></p>\n</li>\n</ul>","frontmatter":{"title":"Intersection Observer API로 Infinite Scroll 구현하기","date":"2021-05-01","summary":"Intersection Observer API가 무엇이고, 어떻게 사용하는지 알아봅시다. 그리고 이를 통해 어떻게 인피니티 스크롤을 구현하는지 알아봅시다.","categories":["Web","React"],"thumbnail":{"publicURL":"/static/c9c263edb00ae069a288e500020a1501/developing-infinite-scroll-using-intersection-observer-api.png","childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB/0lEQVQoz4VTaY/SUBTl5wBhbctSVtlaoGXpSmkLOAQkNuAHo4kzxvkiLqMTE3/xMfc2oxMnyoeT03vve6f3vXteolAo4F/I5/MoFosQBAFFQYi5KHCNWBD+gNZRPnFJUBlOMDc9TOcuZsYC+tRGVa4zU0x5qqujKSRJuiw40uawnBCGtYRp+5iZHmr1FubGgmPKW06AsW5BkkqXBTXdhOttYLkhnMUKhh2gVm+zGMVxfg196qBUKiFBm/4nKNeaaLZ7aLS6aLZ6aDQ7EEWJmWPOd1FvPEO1Wo07pI25XI7x+JtAixVVR18ZY6Bq6PaHEMUSOl0VA0XjHNU7XQWVSiXuUBRFyLKMcrnMbVOBQHfieiv44RaL5QaL5XM+fn8wwmqzxzK4gmkHfHQ6MgtmMhlMJhOcTiccDgccj0dEUYQoeon1eo3zpzt8v/+Jj+c7fP5yjw+3Z7y7fo+v335gu4t4KE8EVVXFfr/HbrdDGIbwfZ+x2WxwtX2BN29vcH1zi+Or17CdAOWKjIGqx1Bi7vSGsWA2m4WiKAiC4LeQ67rMQeBD06ewbA+242GszfiuyNT1RpsH8wCyEgvSUKjLZDLJSKVSSKfTzBQPxzP2GfmP7suw/Ee2WcN2Q7jeGpOZE0/5wTb0dP5GoVB8amzDg1xrYWa4nDP4Rz7Gmskv5RdLzbDXjcMt8QAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/c9c263edb00ae069a288e500020a1501/0f157/developing-infinite-scroll-using-intersection-observer-api.png","srcSet":"/static/c9c263edb00ae069a288e500020a1501/c7aa3/developing-infinite-scroll-using-intersection-observer-api.png 192w,\n/static/c9c263edb00ae069a288e500020a1501/cff52/developing-infinite-scroll-using-intersection-observer-api.png 384w,\n/static/c9c263edb00ae069a288e500020a1501/0f157/developing-infinite-scroll-using-intersection-observer-api.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[{"srcSet":"/static/c9c263edb00ae069a288e500020a1501/04b43/developing-infinite-scroll-using-intersection-observer-api.webp 192w,\n/static/c9c263edb00ae069a288e500020a1501/7efec/developing-infinite-scroll-using-intersection-observer-api.webp 384w,\n/static/c9c263edb00ae069a288e500020a1501/803f0/developing-infinite-scroll-using-intersection-observer-api.webp 768w","type":"image/webp","sizes":"(min-width: 768px) 768px, 100vw"}]},"width":768,"height":449.99999999999994}}}},"tableOfContents":"<ul>\n<li><a href=\"#%EC%84%9C%EB%A1%A0\">서론</a></li>\n<li><a href=\"#intersection-observer-api%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C\">Intersection Observer API란 무엇일까?</a></li>\n<li><a href=\"#intersection-observer-api-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\">Intersection Observer API 사용 방법</a></li>\n<li><a href=\"#intersection-observer-api%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%9D%B8%ED%94%BC%EB%8B%88%ED%8B%B0-%EC%8A%A4%ED%81%AC%EB%A1%A4-%EC%98%88%EC%A0%9C\">Intersection Observer API를 통한 인피니티 스크롤 예제</a></li>\n<li><a href=\"#source\">Source</a></li>\n</ul>"},"site":{"siteMetadata":{"siteUrl":"https://ji5485.github.io"}}},"pageContext":{"slug":"/post/2021-05-01/developing-infinite-scroll-using-intersection-observer-api/","prev":{"slug":"/post/2021-05-15/what-is-ci-cd/","title":"CI/CD란 무엇이고, 어떻게 활용할 수 있을까?"},"next":{"slug":"/post/2021-04-10/javascript-core-concept-summary-closure/","title":"JavaScript 핵심 개념 - 실행 컨텍스트로 알아보는 클로저 (Closure)"}}},
    "staticQueryHashes": []}